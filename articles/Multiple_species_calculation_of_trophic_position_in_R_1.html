<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>tRophicPosition: calculating trophic position for multiple species • tRophicPosition</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tRophicPosition: calculating trophic position for multiple species">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tRophicPosition</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Multiple_model_calculation_of_trophic_position_in_R.html">Using tRophicPosition to estimate TP through the use of multiple models</a></li>
    <li><a class="dropdown-item" href="../articles/Multiple_species_calculation_of_trophic_position_in_R_1.html">tRophicPosition: calculating trophic position for multiple species</a></li>
    <li><a class="dropdown-item" href="../articles/Short_guide_to_tRophicPosition.html">Short guide to the use of tRophicPosition</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/clquezada/tRophicPosition/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>tRophicPosition: calculating trophic position for multiple species</h1>
                        <h4 data-toc-skip class="author">Claudio
Quezada-Romegialli, Andrew L Jackson &amp; Chris Harrod</h4>
            
            <h4 data-toc-skip class="date">December 11 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/clquezada/tRophicPosition/blob/master/vignettes/Multiple_species_calculation_of_trophic_position_in_R_1.Rmd" class="external-link"><code>vignettes/Multiple_species_calculation_of_trophic_position_in_R_1.Rmd</code></a></small>
      <div class="d-none name"><code>Multiple_species_calculation_of_trophic_position_in_R_1.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="trophicposition">tRophicPosition<a class="anchor" aria-label="anchor" href="#trophicposition"></a>
</h2>
<p><code>tRophicPosition</code>, is an R package incorporating a
Bayesian model for the calculation of trophic position using stable
isotopes with one or two baselines. As of 2022-12-11, the current
version of the package is 0.8. <code>tRophicPosition</code> uses the
powerful approach of Markov Chain Monte Carlo simulations provided by <a href="https://mcmc-jags.sourceforge.io/" class="external-link">JAGS</a> and the statistical
language <a href="https://www.r-project.org" class="external-link">R</a>. Vignettes can be
browsed with <code>browseVignettes("tRophicPosition")</code>.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette, we will introduce the new functions we have
developed for <code>tRophicPosition</code> in the version 0.6.8-9. These
functions are <code><a href="../reference/extractIsotopeData.html">extractIsotopeData()</a></code>,
<code><a href="../reference/jagsBayesianModel.html">jagsBayesianModel()</a></code> and <code><a href="../reference/multiSpeciesTP.html">multiSpeciesTP()</a></code>.
Aditionally, we provide an example to run these calculations in parallel
(maximizing efficient use of computing power). Each of these functions
accomplish different tasks within the Bayesian estimation of trophic
position with stable isotopes, extracting stable isotope data for
multiple species and/or communities, and facilitating the calculation of
trophic position for multiple consumers within one or more ecosystems.
We have also included a parallel calculation of trophic position, to
make full use of the multiple processor cores typical in modern
computers.</p>
<div class="section level3">
<h3 id="installing-and-loading-the-package">Installing and loading the package<a class="anchor" aria-label="anchor" href="#installing-and-loading-the-package"></a>
</h3>
<div class="section level4">
<h4 id="stable-version---cran">Stable version - CRAN<a class="anchor" aria-label="anchor" href="#stable-version---cran"></a>
</h4>
<p>First of all, you need to install <a href="https://mcmc-jags.sourceforge.io/" class="external-link">JAGS</a> for your platform, and
then install the stable version of <code>tRophicPosition</code> from <a href="https://CRAN.R-project.org/package=tRophicPosition" class="external-link">CRAN</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tRophicPosition"</span><span class="op">)</span></span></code></pre></div>
<p>After that, you have to load the package with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/clquezada/tRophicPosition" class="external-link">tRophicPosition</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="development-version---github">Development version - GitHub<a class="anchor" aria-label="anchor" href="#development-version---github"></a>
</h4>
<p>If you want to install the development version of
<code>tRophicPosition</code>, you must install it from GitHub. For this,
we use the function <code>install_github()</code> from the package
<code>devtools</code> (installation instructions <a href="https://github.com/r-lib/devtools#updating-to-the-latest-version-of-devtools" class="external-link">here</a>),
which needs to be installed previously (either from <a href="https://CRAN.R-project.org/package=devtools" class="external-link">CRAN</a> or <a href="https://github.com/r-lib/devtools" class="external-link">GitHub</a>):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span></code></pre></div>
<p>If you are working in Windows, <code>devtools</code> also requires <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools</a>, or if
you are working on a Mac, <a href="https://developer.apple.com/xcode/" class="external-link">Xcode</a> (from Apple Store).
In Linux you will need to install a compiler and various development
libraries.</p>
<p>Besides installing <code>devtools</code>, you must also install <a href="https://mcmc-jags.sourceforge.io/" class="external-link">JAGS</a> (Just Another Gibbs
Sampler), which is at the core of the Bayesian model analysis supporting
<code>tRophicPosition</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install_github</span><span class="op">(</span><span class="st">"clquezada/tRophicPosition"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>After installing <code>tRophicPosition</code>, it should be loaded
into memory, which automatically reports the version of the software (we
need at least 0.6.8-8 to use the routines described in this
vignette).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/clquezada/tRophicPosition" class="external-link">tRophicPosition</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## This is tRophicPosition 0.8.0</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="future-releases-and-how-to-get-support">Future releases and how to get support<a class="anchor" aria-label="anchor" href="#future-releases-and-how-to-get-support"></a>
</h3>
<p>You are encouraged to use <code>tRophicPosition</code> with your own
data, test the package and see if there are any issues or problems. You
can send your questions or commentaries to the google group <a href="https://groups.google.com/d/forum/trophicposition-support" class="external-link">tRophicPosition-support</a>
or directly to the email <a href="mailto:trophicposition-support@googlegroups.com" class="email">trophicposition-support@googlegroups.com</a>. You can send
your questions to <a href="https://stackexchange.com/" class="external-link uri">https://stackexchange.com/</a> <a href="https://stackoverflow.com/" class="external-link uri">https://stackoverflow.com/</a> or even <a href="https://www.facebook.com/groups/stableisotopes/" class="external-link">Facebook (stable
isotope ecology group)</a>.</p>
<p>We are constantly working on future releases of
<code>tRophicPosition</code>, so feedback is very much appreciated.</p>
</div>
</div>
<div class="section level2">
<h2 id="multiple-species-calculation-of-trophic-position-tp">Multiple species calculation of trophic position (TP)<a class="anchor" aria-label="anchor" href="#multiple-species-calculation-of-trophic-position-tp"></a>
</h2>
<div class="section level3">
<h3 id="before-we-start">Before we start<a class="anchor" aria-label="anchor" href="#before-we-start"></a>
</h3>
<p>If you have been using R prior to starting your analysis of
<code>tRophicPosition</code>, it is possible that the environment
contains unwanted data. Try to be as organized as possible with the data
generated within R/RStudio, as this will make things a lot clearer.</p>
<p>When working on your analysis, a good first thing to do is to set the
working directory to a convenient location. This is accomplished using
<code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code>. In RStudio you can use the menu “Session/Set
Working Directory” to make things easier.</p>
<p>The next thing is to clear the environment. With RStudio you can
click on the little broom icon in the environment tab, or use the
command <code>rm(list = ls())</code>. Also, it is a good idea to clear
the plots using the same broom icon in the plots tab, or the command
<code><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">graphics.off()</a></code>. This is only needed if you have been
working with some data before.</p>
</div>
<div class="section level3">
<h3 id="and-now-an-initial-analysis---bilagay-tp-from-multiple-coastal-kelp-forests-in-n-chile">And now, an initial analysis - Bilagay TP from multiple coastal kelp
forests in N Chile<a class="anchor" aria-label="anchor" href="#and-now-an-initial-analysis---bilagay-tp-from-multiple-coastal-kelp-forests-in-n-chile"></a>
</h3>
<p>We will start with some data from a fish common to the coastal kelp
forests of N Chile, the bilagay <em>Cheilodactylus variegatus</em> (<a href="http://www.fishbase.se/summary/Cheilodactylus-variegatus.html" class="external-link uri">http://www.fishbase.se/summary/Cheilodactylus-variegatus.html</a>).
We have data from a number of populations (and associated filter feeding
and grazing molluscs representing pelagic and benthic baselines
respectively) from a series of different locations along the N Chilean
coast. We know from the literature that bilagay diet is extremely
variable and reflects what is locally available. We also know that there
is a marked
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>δ</mi><mn>15</mn></msup><annotation encoding="application/x-tex">\delta^{15}</annotation></semantics></math>N-enrichment
at the base of the food chain reflecting increased upwelling intensity
as you move northwards up the coast. As such, we need to account for
variation in baseline
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>δ</mi><mn>15</mn></msup><annotation encoding="application/x-tex">\delta^{15}</annotation></semantics></math>N
variation before calculating TP at each site.</p>
<p>So, our question is, given the potential influences of local
differences in diet stomach contents and upwelling intensity, are there
measurable differences in bilagay TP between the different locations
along the S-N latitudinal gradient?</p>
<p>We will use a data set included within <code>tRophicPosition</code>.
The structure of the file has 7 columns, where species
(<code>Spp</code>) are grouped into functional groups (<code>FG</code>)
to describe its role in each of the ecosystems: “Bilagay” (our fish of
interest), “Benthic_BL” (benthic baseline) and “Pelagic_BL” (pelagic
baseline). We have samples from locations along the N Chilean coast
(<code>NS</code> stands for the N-S ordering) and from multiple studies
(<code>Study</code>) and locations (<code>Location</code>). We also have
stable isotope values in two columns: “d13C” and “d15N”.</p>
<table style="width:100%;" class="table">
<caption>Structure of the file Bilagay_for_tRophicPosition.csv</caption>
<colgroup>
<col width="5%">
<col width="8%">
<col width="12%">
<col width="37%">
<col width="15%">
<col width="8%">
<col width="7%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">Study</th>
<th align="left">Location</th>
<th align="left">Spp</th>
<th align="left">FG</th>
<th align="right">d13C</th>
<th align="right">d15N</th>
<th align="right">NS</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">MEL</td>
<td align="left">CHI</td>
<td align="left">Echinolittorina peruviana</td>
<td align="left">Benthic_BL</td>
<td align="right">-10.1</td>
<td align="right">16.3</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">MEL</td>
<td align="left">CHI</td>
<td align="left">Echinolittorina peruviana</td>
<td align="left">Benthic_BL</td>
<td align="right">-11.7</td>
<td align="right">16.3</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">MEL</td>
<td align="left">CHI</td>
<td align="left">Echinolittorina peruviana</td>
<td align="left">Benthic_BL</td>
<td align="right">-9.8</td>
<td align="right">16.4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">130</td>
<td align="left">MEL</td>
<td align="left">COL</td>
<td align="left">Bilagay</td>
<td align="left">Bilagay</td>
<td align="right">-15.2</td>
<td align="right">20.9</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">131</td>
<td align="left">MEL</td>
<td align="left">COL</td>
<td align="left">Bilagay</td>
<td align="left">Bilagay</td>
<td align="right">-15.4</td>
<td align="right">21.3</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">132</td>
<td align="left">MEL</td>
<td align="left">COL</td>
<td align="left">Bilagay</td>
<td align="left">Bilagay</td>
<td align="right">-15.2</td>
<td align="right">21.6</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">133</td>
<td align="left">MEL</td>
<td align="left">COL</td>
<td align="left">Bilagay</td>
<td align="left">Bilagay</td>
<td align="right">-15.0</td>
<td align="right">22.0</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">660</td>
<td align="left">MEL</td>
<td align="left">MEJ</td>
<td align="left">Perumytilus purpuratus</td>
<td align="left">Pelagic_BL</td>
<td align="right">-15.9</td>
<td align="right">18.1</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">661</td>
<td align="left">MEL</td>
<td align="left">MEJ</td>
<td align="left">Perumytilus purpuratus</td>
<td align="left">Pelagic_BL</td>
<td align="right">-15.6</td>
<td align="right">17.4</td>
<td align="right">9</td>
</tr>
</tbody>
</table>
<p>If you want to edit the raw data or modify it, open the following
file with your favourite application, save it to your working directory
and then load it with <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> or
<code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Bilagay_for_tRophicPosition.csv"</span>, package <span class="op">=</span> <span class="st">"tRophicPosition"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "/home/runner/work/_temp/Library/tRophicPosition/extdata/Bilagay_for_tRophicPosition.csv"</span></span></code></pre>
<p>To load the <code>Bilagay</code> data set into R, use
<code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Bilagay"</span><span class="op">)</span></span></code></pre></div>
<p>As shown above, in this data set we have a combination of Study and
Location variables, which need to be concatenated. Here we introduce
<code>mutate</code> and <code>arrange</code> functions from the package
dplyr and the pipe operator <code>%&gt;%</code> (from magrittr but
loaded through dplyr).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages(dplyr) if you haven't installed it before</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">Bilagay</span> <span class="op">&lt;-</span> <span class="va">Bilagay</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Community <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Study</span>,<span class="st">"-"</span>, <span class="va">Location</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Also, this spreadsheet has information from the latitudinal
arrangement of sampling sites, which is the variable <code>NS</code>
(North to South order), ranging from 1 (most southern site) to 10 (most
northern site). Below we order the whole data frame considering those
values.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bilagay</span> <span class="op">&lt;-</span> <span class="va">Bilagay</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">NS</span><span class="op">)</span></span></code></pre></div>
<p>Now, we are ready to proceed with the calculation of trophic
position. This follows the same general process you have already
encountered in the previous vignette (<a href="https://github.com/clquezada/tRophicPosition-release-and-vignettes/blob/master/A_guide_to_the_use_of_tRophicPosition_2016-06-12.pdf" class="external-link">A
guide to the use of tRophicPosition</a>. First we must consecutively
subset the data frame considering each of the communities we have
samples of. We could use the subset command, repeating the same command
each time for each community.</p>
<p>If we only have 2 sampling sites, this can be done by hand. However,
here we have different 10 sampling sites, so this task can be prone to
errors and time-consuming, as we have to repeat the same code 10 times,
but with changes in the Location, selecting the baseline, etc.</p>
<p>To deal with this issue, we have developed a convenient function
<code><a href="../reference/extractIsotopeData.html">extractIsotopeData()</a></code> where you can indicate the text for
each of the baselines and the respective column where they are coded,
the consumers column, and the group column. This function iterates
through the data frame selecting unique values from the group column,
extracting all the values that belong to each group and then iterate
within them. Then it will extract all stable isotope values from the
columns “d13C” and “d15N” (if their values haven’t changed) for each
baseline. Finally, it will select each unique value from the consumers
column and it will generate an <code>isotopeData</code> class object for
each consumer combining their baselines isotope values. See
<code><a href="../reference/extractIsotopeData.html">help(extractIsotopeData)</a></code> for other options.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">BilagayList</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extractIsotopeData.html">extractIsotopeData</a></span><span class="op">(</span><span class="va">Bilagay</span>, b1 <span class="op">=</span> <span class="st">"Pelagic_BL"</span>, b2 <span class="op">=</span> <span class="st">"Benthic_BL"</span>,</span>
<span>                                  baselineColumn <span class="op">=</span> <span class="st">"FG"</span>, consumersColumn <span class="op">=</span> <span class="st">"Spp"</span>,</span>
<span>                                  groupsColumn <span class="op">=</span> <span class="st">"Community"</span>,</span>
<span>                                  d13C <span class="op">=</span> <span class="st">"d13C"</span>, d15N <span class="op">=</span> <span class="st">"d15N"</span><span class="op">)</span></span></code></pre></div>
<p>If no
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Δ</mi><annotation encoding="application/x-tex">\Delta</annotation></semantics></math>N
and/or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Δ</mi><annotation encoding="application/x-tex">\Delta</annotation></semantics></math>C
values are included as arguments, by default this function will use
assumptions from Post (2002), i.e. 3.4
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>±</mo><annotation encoding="application/x-tex">\pm</annotation></semantics></math>
0.98 sd for nitrogen and 0.39
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>±</mo><annotation encoding="application/x-tex">\pm</annotation></semantics></math>
1.3 sd for carbon). You can change either TDF values using the function
<code><a href="../reference/TDF.html">TDF()</a></code> or a list of values, as explained in the short guide
to the use of tRophicPosition vignette.</p>
<p>The next step is use the <code>str</code> function to check that all
went well during the use of the <code><a href="../reference/extractIsotopeData.html">extractIsotopeData()</a></code>
function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">BilagayList</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 1</span></span>
<span><span class="co">##  $ MEC-Coquimbo-Bilagay:List of 8</span></span>
<span><span class="co">##   ..$ dNb1  : num [1:15] 13.8 14.3 14.2 13.4 13.8 13.3 14.6 14 14.2 13.9 ...</span></span>
<span><span class="co">##   ..$ dCb1  : num [1:15] -17.3 -17.6 -17.4 -16.6 -17 -16.9 -18.5 -18.1 -17.5 -18.3 ...</span></span>
<span><span class="co">##   ..$ dNb2  : num [1:28] 14.9 15.2 15 15.2 16.3 15.7 15.4 15.5 16.4 15.4 ...</span></span>
<span><span class="co">##   ..$ dCb2  : num [1:28] -11.1 -11.9 -11.7 -11.5 -14.6 -13.8 -14.5 -14.3 -14.6 -13.9 ...</span></span>
<span><span class="co">##   ..$ deltaN: num [1:56] 2.48 3.21 3.81 2.28 3.74 ...</span></span>
<span><span class="co">##   ..$ deltaC: num [1:107] -1.158 -0.129 0.719 -1.45 0.622 ...</span></span>
<span><span class="co">##   ..$ dNc   : num [1:10] 19.4 19 19.1 18.3 19.8 20.1 19.6 20.3 19.5 19.9</span></span>
<span><span class="co">##   ..$ dCc   : num [1:10] -16.2 -16.7 -17.8 -16.5 -16.8 -17.8 -16.3 -15.5 -16.3 -16</span></span>
<span><span class="co">##   ..- attr(*, "class")= chr "isotopeData"</span></span>
<span><span class="co">##   ..- attr(*, "consumer")= chr "Bilagay"</span></span>
<span><span class="co">##   ..- attr(*, "baseline1")= chr "Pelagic_BL"</span></span>
<span><span class="co">##   ..- attr(*, "baseline2")= chr "Benthic_BL"</span></span>
<span><span class="co">##   ..- attr(*, "group")= chr "MEC-Coquimbo"</span></span></code></pre>
<p>If you execute the code above you will see a lot of information, but
for this vignette, we have shortened the output to make it readable. In
your console, you will note that there is a list of 10 elements,
followed by the sign $ and the concatenated name of each of our
communities with the name of our species (Bilagay). Each of these
objects (MEC-Coquimbo-Bilagay, MEC-Taltal-Bilagay, etc.) is a list of 8
elements that relate to a particular sampling location, in a structure
that is ready to use with <code>tRophicPosition</code>: they are objects
of the class <code>isotopeData</code>.</p>
<p>The class <code>isotopeData</code> is a special object recognized
within the package. It also has other information embedded within it:
consumer, baseline 1, baseline 2, and community labels, besides a list
of isotope values with the convention introduced before (dNb1 is d15N of
baseline 1, dCb1 is d13C of baseline 1, dNb2 and dCb2 respectively for
the baseline 2, dNc and dCc respectively for the consumer, and deltaN
and deltaC are trophic discrimination factors).</p>
<p>Now, as we have extracted each community from the original data
frame, we can iterate through them, prepare a summary and plot them.
Here we introduce the <code>for</code> command, which is one of the
basic control-flow elements of programming. Again, if you execute the
following code you will have a summary and a plot for each community,
but in this vignette, you will see only one example.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">community</span> <span class="kw">in</span> <span class="va">BilagayList</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">community</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">community</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Summary for stable isotope data object </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Group  MEC-Coquimbo </span></span>
<span><span class="co">## Consumer  Bilagay </span></span>
<span><span class="co">## Baseline 1  Pelagic_BL </span></span>
<span><span class="co">## Baseline 2  Benthic_BL </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##        n   mean  sd  se  min   max   median</span></span>
<span><span class="co">## dNb1   15  13.7  0.7 0.2 12.1  14.6  13.8  </span></span>
<span><span class="co">## dCb1   15  -17.5 0.6 0.1 -18.5 -16.6 -17.5 </span></span>
<span><span class="co">## dNb2   28  15.4  0.5 0.1 14.6  16.4  15.3  </span></span>
<span><span class="co">## dCb2   28  -13.3 1.2 0.2 -15.1 -11.1 -13.8 </span></span>
<span><span class="co">## deltaN 56  3.4   1   0.1 1.1   5.4   3.3   </span></span>
<span><span class="co">## deltaC 107 0.4   1.3 0.1 -3.2  3     0.6   </span></span>
<span><span class="co">## dNc    10  19.5  0.6 0.2 18.3  20.3  19.6  </span></span>
<span><span class="co">## dCc    10  -16.6 0.7 0.2 -17.8 -15.5 -16.4</span></span></code></pre>
<p><img src="Multiple_species_calculation_of_trophic_position_in_R_1_files/figure-html/unnamed-chunk-16-1.png" width="672"></p>
<p>Now we have to model each community within the Bayesian framework of
<code>tRophicPosition</code> (as introduced previously in other
vignettes, e.g. <a href="https://github.com/clquezada/tRophicPosition-release-and-vignettes/blob/master/A_guide_to_the_use_of_tRophicPosition_2016-06-12.pdf" class="external-link">a
guide to the use of tRophicPosition</a>.</p>
<p>For this, we have developed a function that automatically i) defines
a Bayesian model, ii) initializes the model and iii) samples the
posterior distribution of trophic position. This is accomplished using
the function <code><a href="../reference/multiSpeciesTP.html">multiSpeciesTP()</a></code>, similar to the function
<code>multiModelsTP()</code> explained in the vignette multiple models
calculation with tRophicPosition.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bilagay_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multiSpeciesTP.html">multiSpeciesTP</a></span><span class="op">(</span><span class="va">BilagayList</span>, model <span class="op">=</span> <span class="st">"twoBaselinesFull"</span>,</span>
<span>                                             n.adapt <span class="op">=</span> <span class="fl">10000</span>, n.iter <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>                                             burnin <span class="op">=</span> <span class="fl">10000</span>, n.chains <span class="op">=</span> <span class="fl">5</span>, print <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Compiling model graph</span></span>
<span><span class="co">##    Resolving undeclared variables</span></span>
<span><span class="co">##    Allocating nodes</span></span>
<span><span class="co">## Graph information:</span></span>
<span><span class="co">##    Observed stochastic nodes: 269</span></span>
<span><span class="co">##    Unobserved stochastic nodes: 36</span></span>
<span><span class="co">##    Total graph size: 330</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Initializing model</span></span></code></pre>
<p>By default, the function <code><a href="../reference/multiSpeciesTP.html">multiSpeciesTP()</a></code> uses
<code>lambda = 2</code> (trophic level of baselines),
<code>n.chains = 2</code> (number of parallel MCMC simulations), and set
n.adapt, n.iter and burnin as 10000 iterations. The model calculated by
default is <code>oneBaseline</code>, so in this case we have changed it
to <code>model = "twoBaselinesFull"</code> as we have two separate
potential sources of N and C. In this particularly case, there was no
need to explicitly state the number of adaptive iterations, iterations
and burnin, but we decided to make them clear. Also, here we calculate 5
chains instead of the default (i.e. <code>n.chains = 2</code>).</p>
<p>The function <code><a href="../reference/multiSpeciesTP.html">multiSpeciesTP()</a></code> returns 4 objects: 1. a
list named <code>multiSpeciesTP</code>, which includes the raw data
returned by <code><a href="../reference/posteriorTP.html">posteriorTP()</a></code> for each consumer/species per
group/community/sampling location; 2. a data frame named <code>df</code>
with the mode, median and credibility confidence interval for trophic
position and alpha (if a two baselines model was chosen), grouped by
model, consumer/species and group/community/sampling location; 3. a list
named <code>TPs</code> with the posterior samples of trophic position
for each group/community/location and consumer/species; and 4. a list
named <code>Alphas</code> which includes the posterior samples of alpha
(relative contribution of baseline 1) for each species by
group/community/location.</p>
<p>More advanced users will likely directly access this object for
subsequent analysis. For now, we will concentrate on plotting the mode
or median and 95% credibility interval for Bilagay from each location,
using the joint values of trophic position and alpha by
community/location, allowing an easy visual comparison between them:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># By default the mode is used in both trophic position and alpha plots</span></span>
<span><span class="fu"><a href="../reference/credibilityIntervals.html">credibilityIntervals</a></span><span class="op">(</span><span class="va">Bilagay_models</span><span class="op">$</span><span class="va">df</span>, x <span class="op">=</span> <span class="st">"group"</span>, xlab <span class="op">=</span><span class="st">"Community"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If you want to use the median instead of the mode,</span></span>
<span><span class="co"># just add y1 and y2 as arguments</span></span>
<span><span class="fu"><a href="../reference/credibilityIntervals.html">credibilityIntervals</a></span><span class="op">(</span><span class="va">Bilagay_models</span><span class="op">$</span><span class="va">df</span>, x <span class="op">=</span> <span class="st">"group"</span>, xlab <span class="op">=</span><span class="st">"Community"</span>, </span>
<span>                     y1 <span class="op">=</span> <span class="st">"median"</span>, y2 <span class="op">=</span> <span class="st">"alpha.median"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Multiple_species_calculation_of_trophic_position_in_R_1_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
<p>To get a numerical summary of posterior estimates (median and 95%
credibility interval) of trophic position, we can write the
following:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To get a numerical summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">Bilagay_models</span><span class="op">$</span><span class="st">"TPs"</span>, <span class="va">quantile</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.5</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To get the mode</span></span>
<span><span class="fu"><a href="../reference/getPosteriorMode.html">getPosteriorMode</a></span><span class="op">(</span><span class="va">Bilagay_models</span><span class="op">$</span><span class="st">"TPs"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       MEC.Coquimbo.Bilagay.2bf MEC.Taltal.Bilagay.2bf MEL.COL.Bilagay.2bf</span></span>
<span><span class="co">## 2.5%                     3.449                  2.920               3.337</span></span>
<span><span class="co">## 50%                      3.660                  3.192               3.463</span></span>
<span><span class="co">## 97.5%                    3.893                  3.483               3.612</span></span>
<span><span class="co">##       MEL.CHI.Bilagay.2bf MEL.RIN.Bilagay.2bf Fondecyt.ISM.Bilagay.2bf</span></span>
<span><span class="co">## 2.5%                3.557               3.400                    3.278</span></span>
<span><span class="co">## 50%                 3.703               3.545                    3.482</span></span>
<span><span class="co">## 97.5%               3.865               3.711                    3.717</span></span>
<span><span class="co">##       MEL.LAG.Bilagay.2bf MEL.LOB.Bilagay.2bf MEL.MEJ.Bilagay.2bf</span></span>
<span><span class="co">## 2.5%                3.089               3.246               3.218</span></span>
<span><span class="co">## 50%                 3.206               3.384               3.342</span></span>
<span><span class="co">## 97.5%               3.333               3.533               3.487</span></span>
<span><span class="co">##       MEC.Tocopilla.Bilagay.2bf</span></span>
<span><span class="co">## 2.5%                      3.547</span></span>
<span><span class="co">## 50%                       3.762</span></span>
<span><span class="co">## 97.5%                     4.006</span></span></code></pre>
<pre><code><span><span class="co">##                MEC.Coquimbo.Bilagay.2bf MEC.Taltal.Bilagay.2bf</span></span>
<span><span class="co">## Posterior mode                    3.659                  3.182</span></span>
<span><span class="co">##                MEL.COL.Bilagay.2bf MEL.CHI.Bilagay.2bf MEL.RIN.Bilagay.2bf</span></span>
<span><span class="co">## Posterior mode               3.461               3.697               3.542</span></span>
<span><span class="co">##                Fondecyt.ISM.Bilagay.2bf MEL.LAG.Bilagay.2bf MEL.LOB.Bilagay.2bf</span></span>
<span><span class="co">## Posterior mode                    3.476               3.205               3.381</span></span>
<span><span class="co">##                MEL.MEJ.Bilagay.2bf MEC.Tocopilla.Bilagay.2bf</span></span>
<span><span class="co">## Posterior mode               3.338                     3.762</span></span></code></pre>
<p>Finally, we can statistically compare whether either the posterior
samples of trophic position and/or alpha alpha differ between
communities/locations. In this example we compare both posterior
estimates accross communities/locations with the function
<code><a href="../reference/pairwiseComparisons.html">pairwiseComparisons()</a></code>. Remember that this output must to be
read as: what is the probability that consumer in row Y has a posterior
trophic position/alpha less than or equal to consumer in column X. To
make readable the output, we will compare only the first 8
communities/locations. If you want to compare all the
communities/locations, just remove <code>[1:8]</code> below:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, we compare bilagay posterior trophic position estimates</span></span>
<span><span class="va">pairwiseTP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pairwiseComparisons.html">pairwiseComparisons</a></span><span class="op">(</span><span class="va">Bilagay_models</span><span class="op">$</span><span class="va">TPs</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, print <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># And then, we compare their posterior alpha estimates</span></span>
<span><span class="va">pairwiseAlpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pairwiseComparisons.html">pairwiseComparisons</a></span><span class="op">(</span><span class="va">Bilagay_models</span><span class="op">$</span><span class="va">Alphas</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, print <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                [1]   [2]   [3]   [4]   [5]   [6]   [7]   [8]</span></span>
<span><span class="co">## [1] MEC.Coquimbo.Bilagay.2bf 0.000 0.005 0.071 0.628 0.206 0.138 0.000 0.022</span></span>
<span><span class="co">## [2] MEC.Taltal.Bilagay.2bf   0.995 0.000 0.958 0.998 0.981 0.949 0.541 0.880</span></span>
<span><span class="co">## [3] MEL.COL.Bilagay.2bf      0.929 0.042 0.000 0.987 0.777 0.550 0.002 0.219</span></span>
<span><span class="co">## [4] MEL.CHI.Bilagay.2bf      0.372 0.002 0.013 0.000 0.081 0.056 0.000 0.001</span></span>
<span><span class="co">## [5] MEL.RIN.Bilagay.2bf      0.794 0.019 0.223 0.919 0.000 0.326 0.001 0.071</span></span>
<span><span class="co">## [6] Fondecyt.ISM.Bilagay.2bf 0.862 0.051 0.450 0.944 0.674 0.000 0.014 0.236</span></span>
<span><span class="co">## [7] MEL.LAG.Bilagay.2bf      1.000 0.459 0.998 1.000 0.999 0.986 0.000 0.970</span></span>
<span><span class="co">## [8] MEL.LOB.Bilagay.2bf      0.978 0.120 0.781 0.999 0.929 0.764 0.030 0.000</span></span></code></pre>
<pre><code><span><span class="co">##                                [1]   [2]   [3]   [4]   [5]   [6]   [7]   [8]</span></span>
<span><span class="co">## [1] MEC.Coquimbo.Bilagay.2bf 0.000 0.528 0.809 0.622 0.838 0.026 0.899 0.813</span></span>
<span><span class="co">## [2] MEC.Taltal.Bilagay.2bf   0.472 0.000 0.805 0.614 0.835 0.019 0.897 0.805</span></span>
<span><span class="co">## [3] MEL.COL.Bilagay.2bf      0.191 0.195 0.000 0.272 0.544 0.006 0.682 0.535</span></span>
<span><span class="co">## [4] MEL.CHI.Bilagay.2bf      0.378 0.386 0.728 0.000 0.770 0.012 0.861 0.753</span></span>
<span><span class="co">## [5] MEL.RIN.Bilagay.2bf      0.162 0.165 0.456 0.230 0.000 0.004 0.639 0.493</span></span>
<span><span class="co">## [6] Fondecyt.ISM.Bilagay.2bf 0.974 0.981 0.994 0.988 0.996 0.000 0.997 0.994</span></span>
<span><span class="co">## [7] MEL.LAG.Bilagay.2bf      0.101 0.103 0.318 0.139 0.361 0.003 0.000 0.351</span></span>
<span><span class="co">## [8] MEL.LOB.Bilagay.2bf      0.187 0.195 0.465 0.247 0.507 0.006 0.649 0.000</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="parallel-trophic-position">Parallel trophic position<a class="anchor" aria-label="anchor" href="#parallel-trophic-position"></a>
</h3>
<p>As an appendix, we will estimate trophic position using parallel
calculations. We will use the library <code>parallel</code> that comes
with base R. First we have to create a parallel socket cluster, i.e. to
create a set of copies of R running in parallel. This is done with the
function <code>makePSOCKcluster()</code> and detecting the number of
cores with <code>detectCores()</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makePSOCKcluster</a></span><span class="op">(</span><span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then we will use the function <code>parLapply()</code>. This function
is a parallel version of <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> a function that applies a
function over a list. As we coded <code>tRophicPosition</code>
specifically to use lists, we can calculate the trophic position for a
number of species in parallel rather in series. As we are just comparing
the performance of the serial vs parallel version of multiModelTP, we
will use just 500 adaptive iterations and 500 actual iterations after
discarding 500 iterations as burnin:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First we calculate the time elapsed with system.time() with parallel</span></span>
<span><span class="va">time_parallel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parLapply</a></span><span class="op">(</span><span class="va">cl</span>, <span class="va">BilagayList</span>, <span class="va">multiModelTP</span>, </span>
<span>                                               adapt <span class="op">=</span> <span class="fl">500</span>, n.iter <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                                               burnin <span class="op">=</span> <span class="fl">500</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Then we calculate the elapsed time with the normal version</span></span>
<span><span class="va">time_serial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">BilagayList</span>, <span class="va">multiModelTP</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                               adapt <span class="op">=</span> <span class="fl">500</span>, n.iter <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                                               burnin <span class="op">=</span> <span class="fl">500</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We have to stop the cluster after each set of calculations</span></span>
<span><span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># And print the elapsed time</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">time_parallel</span>, <span class="va">time_serial</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##               user.self sys.self elapsed user.child sys.child</span></span>
<span><span class="co">## time_parallel     0.122    0.097  44.455      0.008     0.075</span></span>
<span><span class="co">## time_serial      85.587    1.432  92.284      0.000     0.000</span></span></code></pre>
<p>Above you will see that in a modest MacBook Air (Intel Core i5, 1.6
GHz, 4 cores) the elapsed time with the serial version of
<code><a href="../reference/multiModelTP.html">multiModelTP()</a></code> is roughly 92 seconds, while using the
parallel version, the analysis time is reduced by almost 50 % (44
seconds), a not trivial difference. However, on desktop pc running
Windows 10 (i7 3930-K, 3.2 GHz, 12 cores), the serial version took 73
seconds, while the parallel version took only 14 seconds.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Claudio Quezada-Romegialli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
